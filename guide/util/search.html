<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title></title>
	<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
	<meta name="format-detection" content="telephone=no">
	
	<link rel="shortcut icon" type="image/x-icon" href="../img/favicon_240.png">
	
	<link rel="stylesheet" type="text/css" href="../inc/css/fontawesome/css/all.min.css">
	<link rel="stylesheet" type="text/css" href="../inc/css/guide.css">
	<link rel="stylesheet" type="text/css" href="../inc/css/wg.reset.css">
	
	<script type="text/javascript" src="../inc/js/jquery-3.4.1.min.js"></script>
	<script type="text/javascript" src="../inc/js/guide.js"></script><!--  -->
	<script type="text/javascript" src="../inc/js/data_menu.js"></script><!--  -->
	
</head>
<body style="overflow: scroll;">

<div class="wg single search">
	<header>
		<!-- <h1 class="logo"><a href="#none"><img src="./img/logo_white.png" alt="" title=""></a></h1> -->
		<div class="wgSch">
			<div class="wgTit">
				<strong class="normal">퍼블리싱 페이지 검색</strong>
			</div>
			<!-- button type="button" class="wgBtn" style="color:#fff; font-size: 33px"><i class="fas fa-file-code"></i><span class="blind">코드추출하기</span></button-->
			<div class="ipt">
				<div class="selectWrap">
					<select id="category"></select>
				</div>
				<input type="text" placeholder="검색어 입력" id="keyword">
				<button type="button" class="wgBtn search" id="search"><i class="fas fa-search"></i></button>
				<button type="button" class="wgBtn stop hidden" onclick="searchStop();">Stop</button><!-- hidden -->
			</div>
			<div class="condition">
				<input type="radio" name="typeSel" id="type1" checked="checked" value="idMode">
				<label for="type1">화면아이디 or 메뉴명</label>
				<!-- <input type="radio" name="typeSel" id="type2"  value="stringMode">
				<label for="type2">class 및 텍스트</label> -->
			</div>
		</div>
		<div class="progBar hidden"><!-- hidden -->
			<div class="percent"><strong class="bold">0</strong>%</div>
			<div class="line"><span></span></div>
			<div class="msg">
				<strong class="searchCnt">0</strong>
				<em> / <strong class="total">0</strong></em>
				<span class="state normal">파일 검색중</span>
			</div>
		</div>
	</header>

	<div class="wgContainer">
		<div class="wgContent">
			<div class="wgTop off">
				<h3>검색결과</h3>
				<span class="off">총 <strong class="bold">0</strong>건</span><!-- off -->
			</div>
			<div class="wgCont off">
				<table class="wgTbl" id="resultTable">
					<colgroup>
						<col style="width:6%">
						<col style="width:70%">
						<col style="width:auto">
						<col style="width:7%">
					</colgroup>
					<thead>
						<tr>
							<th>번호</th>
							<th>메뉴명</th>
							<th>파일이름</th>
							<th>파일열기</th>
						</tr>
					</thead>
					<tbody>
					</tbody>
				</table>
	
				<table class="wgTbl off" id="dataTable">
					<tbody>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div><!--// wg (e) -->

<!-- Preview -->
<div class="wgPreview" style="top:250px; left:562px;">
	<div class="prevTit"><strong></strong></div>
	<div class="mobileFrame">
		<iframe id="iframe" src="./index.html" width="375" height="750"></iframe>
	</div>
	<div class="wgBtns">
		<a href="#" class="wgBtn on" target="_blank"><span>열기</span></a>
		<button type="button" class="wgBtn" onclick="previewClose();"><span>닫기</span></button>
	</div>
</div><!-- Preview (e) -->

<!-- wgAlert -->
<div class="wgAlert" id="searchPop">
	<div class="wgAlertContain">
		<div class="wgAlertCont">
			<div class="msg">검색어 형식이 올바르지 않습니다.</div>
		</div>
	</div>
</div><!--// wgAlert (e) -->

</body>
<script type="text/javascript">
var ext = {
		htmlCnt : 0,
		tblBasicMake : function(){
			$('body').append('<div id="copyTableHTML"><table id="noticeTbl" class="tableX"><colgroup><col style="width:50px"><col style="width:110px"><col style="width:28%"><col style="width:auto"><col style="width:110px"></colgroup><thead><tr><th>번호</th><th>화면ID</th><th>화면명</th><th>알아두세요HTML</th><th>복사</th></tr></thead><tbody></tbody></table></div>');
			$('body').append('<div class="dummyHTMLCode"></div>');
			ext.loadCommand();
		},
		loadCommand : function(){
			if( ext.htmlCnt < $('#resultTable > tbody > tr').length ){
				ext.loadAndInput();
			} else {
				ext.finishNotice();
			}
		},
		loadAndInput : function(){
			var pageId = $('#resultTable tbody > tr:eq('+ext.htmlCnt+') > td:eq(2)').text();
			var pageMenu = $('#resultTable tbody > tr:eq('+ext.htmlCnt+') > td:eq(1)').text();
			var pageLink = $('#resultTable tbody > tr:eq('+ext.htmlCnt+') > td:eq(3) a').attr('href');
			ext.htmlCnt++;
			console.log('pageLink : ' + pageLink );
			$('.dummyHTMLCode').empty();
			$('.dummyHTMLCode').load(pageLink + ' .addInfoList.notice .accoBody', function(){
				console.log('로드완료');
				$('#noticeTbl > tbody').append('<tr><td>'+ext.htmlCnt+'</td><td>'+pageId+'</td><td class="al">'+pageMenu+'</td><td class="al"><xmp>'+$('.dummyHTMLCode .accoBody').html()+'</xmp></td><td><button class="btn_l m" type="button" onclick="ext.notiCodeCopy(this);">복사하기</button></td></tr>');
				ext.loadCommand();
			})
		},
		finishNotice : function(){
			//copyToClipboard( $('#copyTableHTML').html() );
			onlyAlertMake('알아두세요. 테이블이 생성 되었습니다.');
			setTimeout(function(){
				onlyAlertRemove();
			},1000);
		},
		notiCodeCopy : function(target){
			var copyHTML = $(target).closest('tr').find('xmp').html();
			copyToClipboard( copyHTML );
		}

}
$(document).ready(function(){
	seachStarter();
	/*$('body').bind({
		'dblclick':function(){
			ext.tblBasicMake();
		}
	});*/
});







</script>
</html>
